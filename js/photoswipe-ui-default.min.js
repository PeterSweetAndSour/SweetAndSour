!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipeUI_Default=t()}(this,function(){"use strict";return function(a,r){function t(e){var t=(e=e||a.scrollWrap.querySelector(".pswp__button--caption--ctrl")).parentNode,o=t.querySelector(".pswp__caption__center"),n=z(t);e.classList.contains("pswp__button--caption--ctrl--expand")?(n.naturalCaptionHeight<n.maxExpandedCaptionHeight?y.style.height=n.naturalCaptionHeight+"px":(y.style.height=n.maxExpandedCaptionHeight+"px",o.style.overflowY="auto"),e.classList.remove("pswp__button--caption--ctrl--expand"),e.classList.add("pswp__button--caption--ctrl--collapse"),e.setAttribute("title","Collapse caption"),o.classList.remove("collapsed"),o.classList.add("expanded"),o.setAttribute("aria-expanded","true")):(A.style.height=n.maxCollapsedCaptionHeight+"px",e.classList.add("pswp__button--caption--ctrl--expand"),e.classList.remove("pswp__button--caption--ctrl--collapse"),e.setAttribute("title","Expand caption"),o.style.overflowY="hidden",o.classList.remove("expanded"),o.classList.add("collapsed"),o.setAttribute("aria-expanded","false"))}function e(e){if(O)return!0;e=e||window.event,H.timeToIdle&&H.mouseUsed&&!T&&B();for(var t,o,n=e.target||e.srcElement,a=n.getAttribute("class")||"",i=0;i<Y.length;i++)(t=Y[i]).onTap&&-1<a.indexOf("pswp__"+t.name)&&(t.onTap(n),o=!0);if(n.closest(".pswp__caption__center")&&(o=!0),o){e.stopPropagation&&e.stopPropagation(),O=!0;var s=r.features.isOldAndroid?600:30;setTimeout(function(){O=!1},s)}}function o(e,t,o){r[(o?"add":"remove")+"Class"](e,"pswp__"+t)}function n(){var e=1===H.getNumItemsFn();e!==S&&(o(w,"ui--one-slide",e),S=e)}function i(){o(v,"share-modal--hidden",D)}function s(){return(D=!D)?(r.removeClass(v,"pswp__share-modal--fade-in"),setTimeout(function(){D&&i()},300)):(i(),setTimeout(function(){D||r.addClass(v,"pswp__share-modal--fade-in")},30)),D||U(),0}function l(e){var t=(e=e||window.event).target||e.srcElement;return a.shout("shareLinkClick",e,t),!!t.href&&(!!t.hasAttribute("download")||(window.open(t.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),D||s(),!1))}function p(e){for(var t=0;t<H.closeElClasses.length;t++)if(r.hasClass(e,"pswp__"+H.closeElClasses[t]))return!0}function c(e){var t=(e=e||window.event).relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(k),k=setTimeout(function(){K.setIdle(!0)},H.timeToIdleOutside))}function u(e){var t=e.vGap;if(!a.likelyTouchDevice||H.mouseUsed||screen.width>H.fitControlsWidth||H.allowLongCaptions){var o=H.barsSize;if(H.showCaption&&"auto"===o.bottom)if(_||((_=r.createElement("pswp__caption pswp__caption--fake")).appendChild(r.createElement("pswp__caption__center")),w.insertBefore(_,f),r.addClass(w,"pswp__ui--fit")),H.addCaptionHTMLFn(e,_)){var n=_.clientHeight;t.bottom=parseInt(n,10)||44}else t.bottom=o.top;else t.bottom="auto"===o.bottom?0:o.bottom;t.top=o.top}else t.top=t.bottom=0}function d(){var e;(e=document.createElement("style")).appendChild(document.createTextNode("")),document.head.appendChild(e);var t=(E=e.sheet).insertRule(".pswp__caption__center.expanded {}",E.cssRules.length),o=E.insertRule(".pswp__caption__center.collapsed {}",E.cssRules.length);y=E.cssRules.item(t),A=E.cssRules.item(o),E.insertRule(".pswp__caption__center { width: 100%; max-width: 720px; }",E.cssRules.length)}function m(){function e(e){if(e)for(var t=e.length,o=0;o<t;o++){a=e[o],i=a.className;for(var n=0;n<Y.length;n++)s=Y[n],-1<i.indexOf("pswp__"+s.name)&&(H[s.option]?(r.removeClass(a,"pswp__element--disabled"),s.onInit&&s.onInit(a)):r.addClass(a,"pswp__element--disabled"))}}var a,i,s;e(w.children);var t=r.getChildByClass(w,"pswp__top-bar");t&&e(t.children),function(){var e=document.querySelector(".pswp__caption");if(!e.querySelector(".pswp__button--caption--ctrl")){var t=document.createElement("button"),o=e.querySelector(".pswp__caption__center");t.setAttribute("class","pswp__button pswp__button--caption--ctrl"),t.setAttribute("id","pswp__button--caption--ctrl"),t.setAttribute("title","Expand caption"),e.insertBefore(t,o)}}()}var h,w,f,_,g,C,v,b,T,x,I,F,L,S,E,y,A,H,O,R,k,K=this,P=!1,q=!0,D=!0,M={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){var o=t.querySelector(".pswp__caption__center");if(!e.title)return o.innerHTML="",!1;if(o.innerHTML=e.title,H.allowLongCaptions){var n=e.initialPosition.y,a=Math.round(e.h*e.initialZoomLevel),i=e.vGap.top;K.resetCaption();var s=o.clientHeight,r=t.querySelector(".pswp__button--caption--ctrl");N(t,n,a,i,s);var l=z(t);s-10>l.maxCollapsedCaptionHeight?(r.classList.add("pswp__button--caption--ctrl--expand"),r.setAttribute("aria-controls","pswp__caption__center"),o.setAttribute("aria-expanded","false")):Z(r),A.style.height=l.maxCollapsedCaptionHeight+"px",o.classList.add("collapsed")}return!0},showCloseCtrl:!0,showFullscreenCtrl:!0,showZoomCtrl:!0,showShareCtrl:!0,showCounter:!0,showNextPreviousArrows:!0,showCaption:!0,allowLongCaptions:!1,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return a.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return a.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},N=function(e,t,o,n,a){e.dataset.imagePositionTop=t,e.dataset.apparentImageHeight=o,e.dataset.gapTop=n,e.dataset.naturalCaptionHeight=a},z=function(e){var t={};t.gapTop=parseInt(e.dataset.gapTop,10),t.imagePositionTop=parseInt(e.dataset.imagePositionTop,10),t.apparentImageHeight=parseInt(e.dataset.apparentImageHeight,10),t.naturalCaptionHeight=parseInt(e.dataset.naturalCaptionHeight,10);var o=t.imagePositionTop+t.apparentImageHeight;return t.maxCollapsedCaptionHeight=window.innerHeight-o,t.maxExpandedCaptionHeight=window.innerHeight-t.gapTop,t},Z=function(e){(e=e||a.scrollWrap.querySelector(".pswp__button--caption--ctrl")).classList.remove("pswp__button--caption--ctrl--expand"),e.classList.remove("pswp__button--caption--ctrl--collapse"),e.removeAttribute("aria-controls");var t=e.parentNode.querySelector(".pswp__caption__center");t.removeAttribute("aria-expanded"),t.classList.remove("expanded"),t.classList.remove("collapsed"),y.style.height="auto",A.style.height="auto"},U=function(){for(var e,t,o,n,a="",i=0;i<H.shareButtons.length;i++)e=H.shareButtons[i],t=H.getImageURLForShare(e),o=H.getPageURLForShare(e),n=H.getTextForShare(e),a+='<a href="'+e.url.replace("{{url}}",encodeURIComponent(o)).replace("{{image_url}}",encodeURIComponent(t)).replace("{{raw_image_url}}",t).replace("{{text}}",encodeURIComponent(n))+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",H.parseShareButtonOut&&(a=H.parseShareButtonOut(e,a));v.children[0].innerHTML=a,v.children[0].onclick=l},W=0,B=function(){clearTimeout(k),W=0,T&&K.setIdle(!1)},G=function(e){F!==e&&(o(I,"preloader--active",!e),F=e)},Y=[{name:"caption",option:"showCaption",onInit:function(e){f=e}},{name:"share-modal",option:"showShareCtrl",onInit:function(e){v=e},onTap:function(){s()}},{name:"button--share",option:"showShareCtrl",onInit:function(e){C=e},onTap:function(){s()}},{name:"button--zoom",option:"showZoomCtrl",onTap:a.toggleDesktopZoom},{name:"counter",option:"showCounter",onInit:function(e){g=e}},{name:"button--close",option:"showCloseCtrl",onTap:a.close},{name:"button--arrow--left",option:"showNextPreviousArrows",onTap:a.prev},{name:"button--arrow--right",option:"showNextPreviousArrows",onTap:a.next},{name:"button--fs",option:"showFullscreenCtrl",onTap:function(){h.isFullscreen()?h.exit():h.enter()}},{name:"button--caption--ctrl",option:"allowLongCaptions",onTap:function(e){t(e)}},{name:"preloader",option:"preloaderEl",onInit:function(e){I=e}}];K.init=function(){var t;r.extend(a.options,M,!0),H=a.options,w=r.getChildByClass(a.scrollWrap,"pswp__ui"),x=a.listen,H.closeOnScroll&&(console.info("FYI: Resetting _options.closeOnScroll to false because _options.allowLongCaptions is true."),H.closeOnScroll=!1),H.closeOnVerticalDrag&&(console.info("FYI: Resetting _options.closeOnVerticalDrag to false because _options.allowLongCaptions is true."),H.closeOnVerticalDrag=!1),x("onVerticalDrag",function(e){H.allowLongCaptions||(q&&e<.95?K.hideControls():!q&&.95<=e&&K.showControls())}),x("onPinchClose",function(e){q&&e<.9?(K.hideControls(),t=!0):t&&!q&&.9<e&&K.showControls()}),x("zoomGestureEnded",function(){(t=!1)&&!q&&K.showControls()}),x("beforeChange",K.update),x("doubleTap",function(e){var t=a.currItem.initialZoomLevel;a.getZoomLevel()!==t?a.zoomTo(t,e,333):a.zoomTo(H.getDoubleTapZoom(!1,a.currItem),e,333)}),x("preventDragEvent",function(e,t,o){var n=e.target||e.srcElement;n&&n.getAttribute("class")&&-1<e.type.indexOf("mouse")&&(0<n.getAttribute("class").indexOf("__caption")||/(SMALL|STRONG|EM)/i.test(n.tagName))&&(o.prevent=!1)}),x("bindEvents",function(){r.bind(w,"pswpTap click",e),r.bind(a.scrollWrap,"pswpTap",K.onGlobalTap),a.likelyTouchDevice||r.bind(a.scrollWrap,"mouseover",K.onMouseOver)}),x("unbindEvents",function(){D||s(),R&&clearInterval(R),r.unbind(document,"mouseout",c),r.unbind(document,"mousemove",B),r.unbind(w,"pswpTap click",e),r.unbind(a.scrollWrap,"pswpTap",K.onGlobalTap),r.unbind(a.scrollWrap,"mouseover",K.onMouseOver),h&&(r.unbind(document,h.eventK,K.updateFullscreen),h.isFullscreen()&&(H.hideAnimationDuration=0,h.exit()),h=null)}),x("destroy",function(){H.showCaption&&(_&&w.removeChild(_),r.removeClass(f,"pswp__caption--empty")),v&&(v.children[0].onclick=null),r.removeClass(w,"pswp__ui--over-close"),r.addClass(w,"pswp__ui--hidden"),K.setIdle(!1)}),H.showAnimationDuration||r.removeClass(w,"pswp__ui--hidden"),x("initialZoomIn",function(){H.showAnimationDuration&&r.removeClass(w,"pswp__ui--hidden")}),x("initialZoomOut",function(){r.addClass(w,"pswp__ui--hidden")}),x("parseVerticalMargin",u),m(),H.shareEl&&C&&v&&(D=!0),n(),H.timeToIdle&&x("mouseUsed",function(){r.bind(document,"mousemove",B),r.bind(document,"mouseout",c),R=setInterval(function(){2===++W&&K.setIdle(!0)},H.timeToIdle/2)}),H.fullscreenEl&&!r.features.isOldAndroid&&((h=h||K.getFullscreenAPI())?(r.bind(document,h.eventK,K.updateFullscreen),K.updateFullscreen(),r.addClass(a.template,"pswp--supports-fs")):r.removeClass(a.template,"pswp--supports-fs")),H.preloaderEl&&(G(!0),x("beforeChange",function(){clearTimeout(L),L=setTimeout(function(){a.currItem&&a.currItem.loading?a.allowProgressiveImg()&&(!a.currItem.img||a.currItem.img.naturalWidth)||G(!1):G(!0)},H.loadingIndicatorDelay)}),x("imageLoadComplete",function(e,t){a.currItem===t&&G(!0)})),H.allowLongCaptions&&d()},K.setIdle=function(e){o(w,"ui--idle",T=e)},K.update=function(){P=!(!q||!a.currItem)&&(K.updateIndexIndicator(),H.showCaption&&(H.addCaptionHTMLFn(a.currItem,f),o(f,"caption--empty",!a.currItem.title)),!0),D||s(),n()},K.updateFullscreen=function(e){e&&setTimeout(function(){a.setScrollOffset(0,r.getScrollY())},50),r[(h.isFullscreen()?"add":"remove")+"Class"](a.template,"pswp--fs")},K.updateIndexIndicator=function(){H.showCounter&&(g.innerHTML=a.getCurrentIndex()+1+H.indexIndicatorSep+H.getNumItemsFn())},K.onGlobalTap=function(e){var t=(e=e||window.event).target||e.srcElement;if(!O)if(e.detail&&"mouse"===e.detail.pointerType){if(p(t))return void a.close();r.hasClass(t,"pswp__img")&&(1===a.getZoomLevel()&&a.getZoomLevel()<=a.currItem.fitRatio?H.clickToCloseNonZoomable&&a.close():a.toggleDesktopZoom(e.detail.releasePoint))}else{var o=t.closest(".pswp__caption");if(H.tapToToggleControls&&!o&&(q?K.hideControls():K.showControls()),H.tapToClose&&(r.hasClass(t,"pswp__img")||p(t)))return void a.close()}},K.onMouseOver=function(e){var t=(e=e||window.event).target||e.srcElement;o(w,"ui--over-close",p(t))},K.hideControls=function(){r.addClass(w,"pswp__ui--hidden"),q=!1},K.showControls=function(){q=!0,P||K.update(),r.removeClass(w,"pswp__ui--hidden")},K.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},K.getFullscreenAPI=function(){var e,t=document.documentElement,o="fullscreenchange";return t.requestFullscreen?e={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:o}:t.mozRequestFullScreen?e={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+o}:t.webkitRequestFullscreen?e={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+o}:t.msRequestFullscreen&&(e={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),e&&(e.enter=function(){if(b=H.closeOnScroll,H.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK)return a.template[this.enterK]();a.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},e.exit=function(){return H.closeOnScroll=b,document[this.exitK]()},e.isFullscreen=function(){return document[this.elementK]}),e},K.toggleCaption=function(e){t(e)},K.resetCaption=function(e){Z(e)}}});