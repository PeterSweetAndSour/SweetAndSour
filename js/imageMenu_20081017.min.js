var ImageMenu=new Class({Implements:Options,options:{onOpen:false,onClose:Class.empty,openWidth:200,closedWidth:30,transition:Fx.Transitions.Quad.easeOut,duration:400,open:null,border:0,stopEvent:false},initialize:function(b,a){this.setOptions(a);this.elements=$$(b);this.widths={};this.widths.openSelected=this.options.openWidth;if(this.options.closedWidth){this.widths.openOthers=this.options.closedWidth}else{this.widths.closed=this.elements[0].getStyle("width").toInt();this.widths.openOthers=Math.round(((this.widths.closed*this.elements.length)-(this.widths.openSelected+this.options.border))/(this.elements.length-1))}this.fx=new Fx.Elements(this.elements,{wait:false,duration:this.options.duration,transition:this.options.transition});this.elements.each(function(d,c){d.addEvent("mouseenter",function(f){if(this.options.stopEvent){new Event(f).stop()}this.reset(c)}.bind(this));d.addEvent("mouseleave",function(f){if(this.options.stopEvent){new Event(f).stop()}this.reset(this.options.open)}.bind(this));var e=this;if(e.options.onOpen){d.getElement("span").addEvent("click",function(f){if(e.options.stopEvent){new Event(f).stop()}if(e.options.open==c){e.options.open=null;e.options.onClose(this.parentNode.href,c)}else{e.options.open=c;e.options.onOpen(this.parentNode.href,c)}})}}.bind(this));if(this.options.open!=null){if($type(this.options.open)=="number"){this.reset(this.options.open)}else{this.elements.each(function(d,c){if(d.id==this.options.open){this.reset(c)}},this)}}},reset:function(a){if($type(a)=="number"){var b=this.widths.openOthers;if(a+1==this.elements.length){b+=this.options.border}}else{var b=this.widths.closed}var c={};this.elements.each(function(f,e){var d=b;if(e==this.elements.length-1){d=b+5}c[e]={width:d}}.bind(this));if($type(a)=="number"){c[a]={width:this.widths.openSelected}}this.fx.start(c)}});var IMSubNav=(function(){var d;var b=null;var e=null;var a=null;var c=null;return{prepare:function(){d=$("imageMenu").getFirst("ul").getElement("li.selected");var g=$("imageMenu").getFirst("ul").getChildren();g.each(function(j,i){j.addEvent("mouseover",this.activate1.bind(this,j));j.addEvent("mouseout",this.restore1.bind(this,j));j.addEvent("click",this.activate1.bind(this,j))},this);b=d.getElement("li.selected");var f=$$("ul.menu2");var h=[];f.each(function(i){h.extend(i.getChildren("li"))});h.each(function(j,i){j.addEvent("mouseover",this.activate2.bind(this,j));j.addEvent("mouseout",this.restore2.bind(this,j));j.addEvent("click",this.activate2.bind(this,j))},this)},activate1:function(f){if(f!=d){d.addClass("off");f.addClass("on");e=f}},restore1:function(){d.removeClass("off");if(e){e.removeClass("on")}},activate2:function(f){if(f!=b){if(b){b.addClass("off")}f.addClass("on");a=f;c=f.getPrevious("li");if(c){c.addClass("beforeSelected")}}},restore2:function(){if(b){b.removeClass("off")}if(a){a.removeClass("on");if(c){c.removeClass("beforeSelected");c=null}}}}})();